/**
 * Хук useDidMount - отслеживает состояние монтирования компонента React
 * 
 * Этот хук решает следующие задачи:
 * 1. Определяет, был ли компонент смонтирован в DOM
 * 2. Помогает различать начальный рендер от последующих обновлений
 * 3. Полезен для условного рендеринга после монтирования
 * 
 * Технические аспекты:
 * - Использует useState для хранения состояния монтирования
 * - Использует useEffect с пустым массивом зависимостей для одноразового выполнения
 * - Безопасен для использования в React.StrictMode
 */

import { useEffect, useState } from 'react';

/**
 * Хук для определения состояния монтирования компонента
 * 
 * @returns {boolean} Возвращает true, если компонент был смонтирован
 * 
 * Принцип работы:
 * 1. Изначально возвращает false (компонент не смонтирован)
 * 2. После монтирования компонента устанавливает значение в true
 * 3. Состояние сохраняется между ре-рендерами
 * 
 * Пример использования:
 * ```typescript
 * function MyComponent() {
 *   const isMounted = useDidMount();
 * 
 *   return (
 *     <div>
 *       {isMounted ? (
 *         // Показываем контент только после монтирования
 *         <ComplexAnimation />
 *       ) : (
 *         // Показываем плейсхолдер до монтирования
 *         <LoadingSpinner />
 *       )}
 *     </div>
 *   );
 * }
 * ```
 * 
 * Частые сценарии использования:
 * - Отложенная загрузка тяжелых компонентов
 * - Анимации после монтирования
 * - Предотвращение SSR-гидратации
 * - Условный рендеринг клиентского кода
 */
export function useDidMount(): boolean {
  // Создаем состояние для отслеживания монтирования
  // Изначально false, так как компонент еще не смонтирован
  const [didMount, setDidMount] = useState(false);

  // useEffect с пустым массивом зависимостей выполнится один раз
  // после первого рендера компонента (монтирования)
  useEffect(() => {
    // Устанавливаем флаг монтирования в true
    setDidMount(true);
  }, []); // Пустой массив означает, что эффект выполнится только при монтировании

  // Возвращаем текущее состояние монтирования
  return didMount;
}